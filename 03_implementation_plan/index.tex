\chapter{Implementation Plan}

\section{Introduction}

Due to the potentially large scope of this project, it is beneficial to have a timeline/plan of when different aspects of the SystemNaim must be complete so at to not overextend and result in the final deliverable not being able to produce interesting results. Therefore, the project has been broken down into 4 major milestones.


\begin{enumerate}[label=\textbf{\arabic*.},ref=\textbf{\arabic*}]
    \item \label{hls} Development of single-FPGA HLS tool
    \item \label{hardware} Development of multi-FPGA communication hardware
    \item \label{multi-HLS}Incorporation of hardware from \ref{hardware} into \ref{hls}
    \item \label{Eval}Evaluation of SystemNaim
\end{enumerate}


Figure \ref{gantt} shows the allocated time for each task along with time taken off for exams. Milestones on the chart indicate deadlines for the respective deliverable and arrows show dependencies between tasks.

\begin{figure}[h]
    \begin{center}
    \begin{ganttchart}[y unit title=0.9cm,
        y unit chart=0.5cm,
        vgrid,
        title label anchor/.style={below=-1.6ex},
        title left shift=.05,
        title right shift=-.05,
        title height=1,
        bar/.style={fill=violet!70},
        bar height=0.6,
        bar top shift =0.2,
        milestone left shift=-0.3,
        milestone/.append style={xscale=0.25},
        group height=0.1]{1}{21}
        %labels
        \gantttitle{Spring Term}{8}
        \gantttitle{}{3}
        \gantttitle{Summer Term}{10} \\
        %months
        \gantttitle{Febuary}{4} 
        \gantttitle{March}{5} 
        \gantttitle{April}{4} 
        \gantttitle{May}{5} 
        \gantttitle{June}{3}  \\
        %feb weeks
        \gantttitle{\begin{sideways}\tiny01/02\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny08/02\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny15/02\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny22/02\end{sideways}}{1}
        %march weeks
        \gantttitle{\begin{sideways}\tiny01/03\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny08/03\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny15/03\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny22/03\end{sideways}}{1}
        \gantttitle{\begin{sideways}\tiny29/03\end{sideways}}{1}
        %april weeks
        \gantttitle{\begin{sideways}\tiny05/04\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny12/04\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny19/04\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny26/04\end{sideways}}{1}
        %may weeks
        \gantttitle{\begin{sideways}\tiny03/05\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny10/05\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny17/05\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny24/05\end{sideways}}{1}
        \gantttitle{\begin{sideways}\tiny31/05\end{sideways}}{1}
        %june weeks
        \gantttitle{\begin{sideways}\tiny07/06\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny14/06\end{sideways}}{1} 
        \gantttitle{\begin{sideways}\tiny21/06\end{sideways}}{1} \\

        %tasks
        \ganttgroup{\textbf{Main Development}}{1}{18}\ganttnewline
        \ganttbar{Single FPGA HLS}{1}{6} \ganttnewline
        \ganttbar{Multi-FPGA hardware}{7}{8}
        \ganttbar{}{10}{10} \ganttnewline
        \ganttbar{Multi-FPGA HLS}{11}{11}
        \ganttbar{}{13}{16} \ganttnewline
        \ganttbar{Evaulation}{17}{18} \ganttnewline
        \ganttbar[bar/.style={fill=yellow!70}]{\textit{Exam Revision}}{9}{9}
        \ganttbar[bar/.style={fill=yellow!70}]{}{12}{12} \ganttnewline
        \ganttgroup{\textbf{Deliverables}}{16}{21} \ganttnewline
        \ganttbar[bar right shift=-0.4]{Report Writing}{16}{20} \ganttnewline
        \ganttmilestone{\textit{Abstract \& Initial Draft}}{18} \ganttnewline
        \ganttmilestone{\textit{Final Submission}}{20} \ganttnewline
        \ganttbar[bar right shift=-0.4]{Presentation Prep}{19}{21} \ganttnewline
        \ganttmilestone{\textit{Presentation}}{21}
        %relations 
        \ganttlink{elem1}{elem4} 
        \ganttlink{elem3}{elem4} 
        \ganttlink{elem5}{elem6}
    \end{ganttchart}
    \caption{Gantt chart showing estimated project time plan}
    \label{gantt}
    \end{center}
\end{figure}

\section{Work allocation \& Risk assessment}
\subsection{Single-FPGA HLS Tool}

The first part of the project covers creating the initial HLS tool which can map the source code into Verilog. Six weeks were allocated to completing this, not because it's the most time-consuming part but rather because during the spring term there will be other modules and coursework that need to be focused on.

Regarding the risk of not completing the work within the given time, most of it will come from finding the correct algorithm to convert C to Verilog. Due to the aforementioned shift in paradigm there will likely be cases where it will be difficult to encode the same functionality that source code represented into Verilog.

There is an aspect of hardware testing towards the end of the six weeks which also is a risk factor, however, by this point most other modules will have been completed and there will be more time to focus on this FYP. There are also plans to use Intel's NIOS II platform as a basis for development. The NIOS II platform allows for easy access to JTAG debugging and  collection of metrics, and will, hopefully, greatly reduce the hardware testing phase.

\subsection{Multi-FPGA Communication Hardware}

The second part of the project concerns itself with the development of the communication hardware which allows multiple FPGAs to communicate. As of now a limitation has been placed two only have two FPGAs, which greatly simplifies the task. Therefore, only 3 weeks have been allocated to this task, with a gap of one week to allow for exam revision. Work may be done during this week, but it is unlikely.

The risk here is much higher than the previous part due to the communication protocol having multiple points of failure. The Ethernet port on either FPGA may be broken, the cable may be faulty, the data may not be presented correctly by the IP blocks. There is also the inherent issue of hardware development being slower that software development. 

To alleviate much of these concerns Intel's library of IP's will be used whenever possible. These blocks have been verified and tested with the target device and thus will be less prone to failure. This will reduce the development time and also ensure that data is correctly passed between devices.

It should be noted that if work is completed ahead of schedule it would definitely be of interest to design a system which would scale beyond two FPGAs.

\section{Multi-FPGA HLS Tool}

The third and probably most difficult part of project is to incorporate the hardware developed in part 2 into the tool developed in part 1. This will likely involve changing the grammar of the source code and simulating new hardware. With the design for the system bearing similarities to an RPC(Remote-Procedure Call) there may be issues abstracting the communication interface so that it is agnostic to the function being called. For example both a function with 3 inputs and function with 4 inputs need to use the same interface and creating an algorithm to handle both cases is a potential risk to the time allocation.

There is also the risk of the hardware testing taking much longer than intended. With two FPGAs being run in tandem there needs to be a way to ensure they can both communicate with each other. This makes the NIOS II platform ideal for controlling the system. With it, we can print to a console and check if data can be successfully communicated between the two devices.

The RPC system will also be abstracted from the HLS tool to show that it does work in the event this part is not completed in time.

A lot of obstacles may arise during this part which is why it was given 5 weeks, with 4 of them being completely uninterrupted by other coursework or exams.



\section{Evaluation}

The final part and likely the most straightforward is the evaluation of the tool. Here, the tools will be used and measure in accordance to the evaluation plan specified in \autoref{subsec:eval_plan}. If testing of the tool has gone to plan, this part should only take two weeks, potentially even less if the exact methodology of evaluation is considered during previous parts.

\section{Report Writing}

The major deliverable of this FYP is the final report and thus work on it must start in parallel to the main development. Even thought \autoref{gantt} only shows the report writing to start during the last week of the Multi-FPGA HLS Tool development, a log book of all design choices and obstacles will be kept from the beginning of development. The time allocated in the Gantt chart only shows when formal writing of the report starts. 

Given that the deadline for the initial draft and abstract is on the 31st of May, which is during the time Evaluation part will be ongoing, the majority of the project will already be complete meaning that most sections of the report will already have been filled in.

Two weeks has been allocated before this deadline to allow ample time to write up all the sections, and then a further two and a half weeks has been given to not only respond to feedback but also as a safety buffer in case not as much of the report was written as was hoped.

\section{Presentation}

The presentation is the final deliverable, and it makes sense to start preparing it after main development has been completed thus ensuring a true overview of what has been achieved. Two and a half weeks have been allocated to prepare this section with the major of the work likely being done after the final deadline for the report.